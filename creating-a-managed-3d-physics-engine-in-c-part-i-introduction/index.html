<!DOCTYPE html>
<html lang="en-us">
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />

    
    
    <title>Creating a Managed 3D Physics Engine in C# – Part I – Introduction · ETdoFresh</title>

    <meta name="HandheldFriendly" content="True" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    
    <link rel="stylesheet" href="/style.main.min.5ea2f07be7e07e221a7112a3095b89d049b96c48b831f16f1015bf2d95d914e5.css" />

</head>
<body class=" post-template ">

    <div class="site-wrapper">

<header class="site-header"><div class="outer site-nav-main">
    <div class="inner"><nav class="site-nav">
    <div class="site-nav-left">
        <a class="site-nav-logo" href="/"><img src="/images/2020/07/ETdoFresh-1.png" alt="ETdoFresh" /></a>
        
        <div class="site-nav-content">
            <ul class="nav" role="menu">
                
                <li class="nav-home" role="menuitem"><a href="/page/about/">About</a></li>
                
                <li class="nav-home" role="menuitem"><a href="/page/contact/">Contact</a></li>
                
                <li class="nav-home" role="menuitem"><a href="/page/wp-import/about/">About Me</a></li>
                
            </ul>
        </div>
        
    </div>
</nav>

</div>
</div></header>

<main id="site-main" class="site-main outer">
    <div class="inner">

        <article class="post-full post  no-image ">

            <header class="post-full-header">

                
                    
                    <section class="post-full-tags">
                        <a href="/tags/physics">Physics</a>
                    </section>
                

                <h1 class="post-full-title">Creating a Managed 3D Physics Engine in C# – Part I – Introduction</h1>

                

                <div class="post-full-byline">
                    <section class="post-full-byline-content">
                        <ul class="author-list">
    <li class="author-list-item">
        <div class="author-card">
            <div class="author-profile-image">
  
  
    
      <img src="/uploads/2020/07/23130511_10102476107592788_8763549408590366509_n.jpg" alt="ETdoFresh" />
    
  
</div>
            <div class="author-info">
                <div class="author-info">
                    <h2>ETdoFresh</h2>
                </div>
            </div>
        </div>
        <a href="/author/ETdoFresh" class="author-avatar author-profile-image">
  
  
    
      <img src="/uploads/2020/07/23130511_10102476107592788_8763549408590366509_n.jpg" alt="ETdoFresh" />
    
  
</a>
    </li>
</ul>

                        <section class="post-full-byline-meta">
                            
                                <h4 class="author-name">ETdoFresh</h4>
                            
                            <div class="byline-meta-content">
                                <time class="byline-meta-date" datetime="2017-65-05">6 May 2017</time>
                                <span class="byline-reading-time"><span class="bull">&bull;</span> 3 min read</span>
                            </div>
                        </section>

                    </section>


                </div>
            </header>

            

            <section class="post-full-content">
                <div class="post-content">
                    <p>Before I knew the existence of <a href="https://github.com/mattleibow/jitterphysics">Jitter Physics</a> (which is what I’ll end up using), I decided to try to make my own Physics Engine following <a href="https://www.amazon.com/Game-Physics-Engine-Development-Commercial-Grade/dp/0123819768">Game Physics Engine Developmnet by Ian Millington</a>, and basically got stuck somewhere when making Contact Resolvers for Rigidbodies. However, I wanted to share my experience making Physics Engine, hopefully as briefly as I can while still making sense.</p>
<h2 id="base-data-types">Base Data Types</h2>
<p>Before we get started in creating the very best physics engine (right?), we first need to decide what kind of data types we’ll be using.</p>
<h3 id="single-precision-float-or-double-precision-double-numbers">Single Precision (float) or Double Precision (double) Numbers</h3>
<!-- raw HTML omitted -->
<pre><code>&lt;td&gt;
  &lt;strong&gt;Double&lt;/strong&gt;
&lt;/td&gt;
</code></pre>
<!-- raw HTML omitted -->
<!-- raw HTML omitted -->
<pre><code>&lt;td&gt;
  &lt;ul&gt;
    &lt;li&gt;
      Size: 8 bytes
    &lt;/li&gt;
    &lt;li&gt;
      Precision: ~ 15 digits
    &lt;/li&gt;
    &lt;li&gt;
      Range: ±5.0 × 10&lt;sup&gt;−324&lt;/sup&gt; to ±1.7 × 10&lt;sup&gt;308&lt;/sup&gt;
    &lt;/li&gt;
    &lt;li&gt;
      Pro: Accuracy
    &lt;/li&gt;
  &lt;/ul&gt;
&lt;/td&gt;
</code></pre>
<!-- raw HTML omitted -->
<p>I am going to choose Single because it’s faster, smaller, and basically it is almost exclusively used by Unity. That’s where I’ll be doing all my testing. Another goal of mine is to structure our code so that we can change between single and double pretty painlessly.</p>
<h3 id="vector3">Vector3</h3>
<p>For convenience sake, it will be important to have access to a (or implement your own) Vector class that has 3 parameters X, Y, Z (of type float or double). Under Matrix, there is a cheat sheet of useful operations for Vectors and Matrices</p>
<h3 id="quaternion">Quaternion</h3>
<p>Because of issues with <a href="https://en.wikipedia.org/wiki/Gimbal_lock">Gimbal Lock</a> we want to steer away from using Vector3 (Euler Angles) to store rotation of an object. So we use Quaternions which have 4 parameters X, Y, Z, W.</p>
<h3 id="matrix">Matrix</h3>
<p>Matrices are used because they are quite powerful. You can do various things with a matrix. You can store Position, Rotation, Scale. And the great thing is any combination of translates (moving position), rotations, and scale modifications can be combined into one matrix. For example, converting from local coordinates to world coordinates can be used by multiplying one matrix. However, the Math gets a little more complex. I found these cheatsheets online on the implementation of Vector3 and Matrix operations.</p>
<!-- raw HTML omitted -->
<pre><code>&lt;td&gt;
  &lt;a href=&quot;https://www.etdofresh.com/wp-content/uploads/2017/05/eng1091-past-paper-summary-monash-university-2-1024.jpg&quot;&gt;&lt;img class=&quot;wp-image-877 size-thumbnail&quot; src=&quot;https://www.etdofresh.com/wp-content/uploads/2017/05/eng1091-past-paper-summary-monash-university-2-1024-150x150.jpg&quot; alt=&quot;&quot; width=&quot;150&quot; height=&quot;150&quot; /&gt;&lt;/a&gt;
&lt;/td&gt;

&lt;td&gt;
  &lt;a href=&quot;https://www.etdofresh.com/wp-content/uploads/2017/05/eng1091-past-paper-summary-monash-university-3-1024.jpg&quot;&gt;&lt;img class=&quot;wp-image-878 size-thumbnail&quot; src=&quot;https://www.etdofresh.com/wp-content/uploads/2017/05/eng1091-past-paper-summary-monash-university-3-1024-150x150.jpg&quot; alt=&quot;&quot; width=&quot;150&quot; height=&quot;150&quot; /&gt;&lt;/a&gt;
&lt;/td&gt;

&lt;td&gt;
  &lt;a href=&quot;https://www.etdofresh.com/wp-content/uploads/2017/05/eng1091-past-paper-summary-monash-university-4-1024.jpg&quot;&gt;&lt;img class=&quot;wp-image-879 size-thumbnail&quot; src=&quot;https://www.etdofresh.com/wp-content/uploads/2017/05/eng1091-past-paper-summary-monash-university-4-1024-150x150.jpg&quot; alt=&quot;&quot; width=&quot;150&quot; height=&quot;150&quot; /&gt;&lt;/a&gt;
&lt;/td&gt;
</code></pre>
<!-- raw HTML omitted -->
<h3 id="timing">Timing</h3>
<p>We want our Physics Engine to run the same given the same input. Hence we will use a constant/fixed time step. This can be whatever you want, but I think for the purposes of this tutorial, we’ll make it 1/60 seconds. Some psuedo code on how we can handle timing is</p>
<!-- raw HTML omitted -->
<!-- raw HTML omitted -->
<p>But if we are handling this via Unity, it’ll probably more in line with the following:</p>
<!-- raw HTML omitted -->
<!-- raw HTML omitted -->
<h3 id="next-time8230">Next Time…</h3>
<p>We’ll start with an overview of the entire Physics Engine. A list of objects, and what they’ll be responsible for. Also start getting into basic physics concepts. See you there!</p>

                </div>
            </section>

        </article>

    </div>
</main>
<aside class="read-next outer">
    <div class="inner">
        <div class="read-next-feed">
    
    <article class="read-next-card">
        <header class="read-next-card-header">
            <h3><span>More in</span> <a href="/tags/physics">Physics</a></h3>
        </header>
        <div class="read-next-card-content">
            <ul>
                
            </ul>
        </div>
    </article>
<article class="post-card post
 no-image
 ">

        
    
        <div class="post-card-content">
    
            <a class="post-card-content-link" href="/discord-notification-of-unity-cloud-build-via-webhooks/">
                <header class="post-card-header">
                    
                        
                        <div class="post-card-primary-tag">Unity</div>
                    

                    <h2 class="post-card-title">Discord Notification of Unity Cloud Build via Webhooks</h2>
                </header>
    
                <section class="post-card-excerpt">
                    <p>EDIT: Looks like Unity Cloud Build now has this built in! Yay! Thanks for those that did donated! Hope it helped you out in the interim!
I wanted to write a small blog post about how to show notifications on your Discord channel when a cloud build is ready. Here are the steps:
 (Optional) Add a channel where build notifications will appear Setup webhook URL in Discord Setup translation webhook Connect webhook URL to Unity Cloud Build Done!</p>
                </section>
            </a>

            <footer class="post-card-meta">
                    <ul class="author-list">
                        <li class="author-list-item">
                            <div class="author-name-tooltip">ETdoFresh</div>
                            <a href="/author/ETdoFresh" class="static-avatar author-profile-image">
  <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><g fill="none" fill-rule="evenodd"><path d="M3.513 18.998C4.749 15.504 8.082 13 12 13s7.251 2.504 8.487 5.998C18.47 21.442 15.417 23 12 23s-6.47-1.558-8.487-4.002zM12 12c2.21 0 4-2.79 4-5s-1.79-4-4-4-4 1.79-4 4 1.79 5 4 5z" fill="#FFF"/></g></svg>
</a>
                        </li>
                    </ul>
                    <div class="post-card-byline-content">
                        <span>ETdoFresh</span>
                        <span class="post-card-byline-date"><time datetime="2017-23-03">13 March 2017</time>
                            <span class="bull">&bull;</span> 2 min read</span>
                    </div>
                </footer>
            </div>
</article>
    

            <article class="post-card post


 ">

        
            <a class="post-card-image-link" href="/police-use-of-force-simulation/">
                <img class="post-card-image"src="/wp-content/uploads/2017/05/puof.png" alt="Police Use of Force Simulation"/>
            </a>
        
    
        <div class="post-card-content">
    
            <a class="post-card-content-link" href="/police-use-of-force-simulation/">
                <header class="post-card-header">
                    
                        
                        <div class="post-card-primary-tag">Game</div>
                    

                    <h2 class="post-card-title">Police Use of Force Simulation</h2>
                </header>
    
                <section class="post-card-excerpt">
                    <p>I am the primary Unity developer on the Police Use of Force Prototype Simulation. It is a research project I’ve worked on with the Narrative Intelligence Laboratoryat the University of New Orleans. You control a Police Officer in either VR or Keyboard/Mouse controls learning Use of Force policies.</p>
                </section>
            </a>

            <footer class="post-card-meta">
                    <ul class="author-list">
                        <li class="author-list-item">
                            <div class="author-name-tooltip">ETdoFresh</div>
                            <a href="/author/ETdoFresh" class="static-avatar author-profile-image">
  <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><g fill="none" fill-rule="evenodd"><path d="M3.513 18.998C4.749 15.504 8.082 13 12 13s7.251 2.504 8.487 5.998C18.47 21.442 15.417 23 12 23s-6.47-1.558-8.487-4.002zM12 12c2.21 0 4-2.79 4-5s-1.79-4-4-4-4 1.79-4 4 1.79 5 4 5z" fill="#FFF"/></g></svg>
</a>
                        </li>
                    </ul>
                    <div class="post-card-byline-content">
                        <span>ETdoFresh</span>
                        <span class="post-card-byline-date"><time datetime="2017-75-05">15 May 2017</time>
                            <span class="bull">&bull;</span> 1 min read</span>
                    </div>
                </footer>
            </div>
</article>
    
        </div>
    </div>
</aside>


        <footer class="site-footer outer">
            <div class="site-footer-content inner">
                <section class="copyright"><a href="/">ETdoFresh</a> &copy; 2017</section>
                <nav class="site-footer-nav">
                    <a href="/">Latest Posts</a>
                    <a href="https://facebook.com/etdofresh" target="_blank" rel="noopener">Facebook</a>
                    <a href="https://twitter.com/etdofresh" target="_blank" rel="noopener">Twitter</a>
                    <a href="https://github.com/etdofresh" target="_blank" rel="noopener">Github</a>
                    <a href="https://jonathanjanssens.com" target="_blank" rel="noopener" style="opacity: 0.5;">Hugo Casper3 by Jonathan Janssens</a>
                </nav>
            </div>
        </footer>

    </div>

</body>
</html>